/*! haywire - v1.0.0 - 2015-05-16 */
var Haywire;!function(a){function b(a,b){for(var c in b)a[c]=b[c];return a}function c(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];return a.reduce(function(a,c){return b(a,c)},{})}function d(a){function b(a,b){return a===b?Math.min(2*l,j.limit):j.interval}function d(){setTimeout(function(){f.ping(function(a){var c=g.last();l=b(a,c),g.add(a),j.onChange(e()),d()})},l)}var j=c(k,a);g=new i(j.threshold),f=new h(j.ping);var l=j.interval;setTimeout(d,0)}function e(){return g.allOk()?j[0]:g.allFailed()?j[2]:j[1]}var f,g,h=function(){function a(a){this.options=a}return a.prototype.ping=function(a){!1===window.navigator.onLine&&a(!1);var b=new XMLHttpRequest;b.timeout=this.options.timeout;var c=this.options.status;b.onreadystatechange=function(d){4===b.readyState&&a(b.status===c)},b.open(this.options.verb,this.options.path,!0),b.send()},a}(),i=function(){function a(a){this.size=a,this.values=[]}return a.prototype.add=function(a){this.values.length>this.size&&this.values.shift(),this.values.push(a)},a.prototype.allOk=function(){return this.values.every(function(a){return a})},a.prototype.allFailed=function(){return this.values.every(function(a){return!a})},a.prototype.last=function(){return this.values.slice(-1)[0]},a}(),j=[{id:0,text:"Ok"},{id:1,text:"Flaky"},{id:2,text:"Offline"}],k={threshold:4,ping:{verb:"GET",path:"/healthcheck",timeout:1500,status:200},interval:500,limit:8e3,onChange:function(){}};a._merge=b,a._extend=c,a.start=d,a.status=e}(Haywire||(Haywire={}));